<?php

namespace Database\Seeders;

use Illuminate\Database\Seeder;
use Illuminate\Support\Facades\DB;
use Illuminate\Support\Facades\Schema;

class DepartmentSeeder extends Seeder
{
    public function run(): void
    {
        // 1. Отключаем проверку внешних ключей (чтобы не было ошибок при удалении)
        Schema::disableForeignKeyConstraints();

        // 2. Полностью очищаем таблицу (удаляем всё старое)
        DB::table('departments')->truncate();

        // 3. Включаем проверку обратно
        Schema::enableForeignKeyConstraints();

        $departments = [
            // --- ТЕОРЕТИЧЕСКИЕ / БАЗОВЫЕ ---
            "Кафедра анатомії людини" => ["anatomy", "anatomy123"],
            "Кафедра біологічної фізики, медичної апаратури та інформатики" => ["biophysics", "phys456"],
            "Кафедра біохімії та загальної хімії" => ["biochemistry", "chem789"],
            "Кафедра гістології" => ["histology", "histo101"],
            "Кафедра медичної біології" => ["med-biology", "bio202"],
            "Кафедра мікробіології" => ["microbiology", "micro303"],
            "Кафедра нормальної фізіології" => ["physiology", "physio404"],
            "Кафедра патологічної анатомії" => ["path-anatomy", "path505"],
            "Кафедра патологічної фізіології" => ["path-physiology", "path606"],
            "Кафедра іноземних мов" => ["languages", "lang707"],
            "Кафедра латинської мови" => ["latin", "lat-new808"], // Исправлен дубль
            "Кафедра суспільних наук" => ["social-sciences", "soc808"],
            "Кафедра філософії та суспільних наук" => ["philosophy", "phil-new909"], // Исправлен дубль
            "Кафедра українознавства" => ["ukrainian-studies", "ukr-new010"],
            "Кафедра педагогіки та психології" => ["pedagogy-psych", "pedpsy-new111"], // Исправлен дубль
            "Кафедра фізвиховання" => ["phys-ed", "pe-new223"], // Исправлен дубль
            "Кафедра загальної гігієни та екології" => ["general-hygiene", "hyg-new333"], // Исправлен дубль
            "Кафедра епідеміології" => ["epidemiology", "epi-new444"], // Исправлен дубль
            "Кафедра судової медицини та права" => ["forensic-med", "foren-new555"], // Исправлен дубль
            "Медичне право" => ["med-law", "law-new666"], // Исправлен дубль
            "Кафедра менеджменту" => ["management", "man-new777"], // Исправлен дубль
            "Кафедра оперативної хірургії та клінічної анатомії" => ["op-surgery", "opsurg-new888"], // Исправлен дубль

            // --- ТЕРАПЕВТИЧЕСКИЕ И СЕМЕЙНАЯ МЕДИЦИНА ---
            "Кафедра внутрішньої медицини №1" => ["int-medicine-1", "med1-111"],
            "Кафедра внутрішньої медицини №2" => ["int-medicine-2", "med2-222"],
            "Кафедра внутрішньої медицини №3" => ["int-medicine-3", "med3-new334"], // Исправлен дубль
            "Кафедра внутрішньої медицини МФ №2" => ["int-medicine-mf2", "medmf2-new445"], // Исправлен дубль
            "Кафедра внутрішньої та сімейної медицини" => ["family-medicine", "fam333"],
            "Кафедра пропедевтики внутрішньої медицини" => ["propaedeutics", "prop323"],
            "Кафедра ендокринології" => ["endocrinology", "endo444"],
            "Кафедра фізичної та реабілітаційної медицини" => ["rehab-medicine", "rehab-new558"], // Исправлен дубль
            "Кафедра фтизіатрії" => ["phthisiology", "tb666"],
            "Кафедра шкірно-венеричних хвороб" => ["dermatology", "derm777"],

            // --- ХИРУРГИЧЕСКИЕ ---
            "Кафедра загальної хірургії" => ["general-surgery", "gensurg888"],
            "Кафедра хірургії №1" => ["surgery-1", "surg656"],
            "Кафедра хірургії №2" => ["surgery-2", "surg767"],
            "Кафедра хірургії МФ №2" => ["surgery-mf2", "surgmf2-999"],
            "Кафедра ендоскопічної та серцево-судинної хірургії" => ["cv-surgery", "cvsurg000"],
            "Кафедра анестезіології, інтенсивної терапії та МНС" => ["anesthesiology", "anes-new112"], // Исправлен дубль
            "Кафедра травматології та ортопедії" => ["traumatology", "traum545"],
            "Курс урології" => ["urology", "uro-new223"], // Исправлен дубль

            // --- АКУШЕРСТВО, ПЕДИАТРИЯ ---
            "Кафедра акушерства і гінекології №1" => ["obstetrics-1", "obs1-909"],
            "Кафедра акушерства і гінекології №2" => ["obstetrics-2", "obs2-010"],
            "Кафедра педіатрії №1" => ["pediatrics-1", "ped1-000"],
            "Кафедра педіатрії №2" => ["pediatrics-2", "ped2-121"],
            "Кафедра пропедевтики дитячих захворювань" => ["prop-pediatrics", "propped-new334"], // Исправлен дубль
            "Кафедра дитячих інфекційних хвороб" => ["ped-infectious", "pedinf-new445"], // Исправлен дубль
            "Кафедра дитячої хірургії" => ["ped-surgery", "pedsurg-new556"], // Исправлен дубль

            // --- УЗКИЕ СПЕЦИАЛЬНОСТИ ---
            "Кафедра інфекційних хвороб" => ["infectious-diseases", "inf555"],
            "Кафедра медицини катастроф та військової медицини" => ["military-med", "mil-new778"], // Исправлен дубль
            "Кафедра нервових хвороб з курсом нейрохірургії" => ["neurology-neurosurg", "neuro-new889"], // Исправлен дубль (был конфликт с 888)
            "Кафедра психіатрії, наркології та психотерапії" => ["psychiatry", "psych434"],
            "Кафедра медичної психології та психіатрії" => ["med-psychology", "medpsy-new556"], // Исправлен дубль
            "Кафедра променевої діагностики, променевої терапії та онкології" => ["oncology-radiology", "oncorad-new990"], // Исправлен дубль
            "Кафедра оториноларингології" => ["ent", "ent-new667"], // Исправлен дубль
            "Кафедра очних хвороб" => ["ophthalmology", "eye-new778"], // Исправлен дубль
            "Кафедра соціальної медицини" => ["social-medicine", "socmed-new889"], // Исправлен дубль

            // --- СТОМАТОЛОГИЯ ---
            "Кафедра ортопедичної стоматології" => ["ortho-dentistry", "ortho878"],
            "Кафедра стоматології дитячого віку" => ["ped-dentistry", "peddent989"],
            "Кафедра терапевтичної стоматології" => ["ther-dentistry", "ther090"],
            "Кафедра хірургічної стоматології" => ["surg-dentistry", "surg101"],

            // --- ФАРМАЦИЯ ---
            "Кафедра клінічної фармації" => ["clin-pharmacy", "pharm666"],
            "Кафедра фармакології" => ["pharmacology", "pharma-new777"], // Исправлен дубль
            "Кафедра фармації" => ["pharmacy", "pharm202"],
            "Кафедра фармацевтичної хімії" => ["pharm-chemistry", "pchem303"],
        ];

        // Теперь просто вставляем данные (можно через insert для скорости, т.к. таблица пустая)
        $dataToInsert = [];
        $now = now();

        foreach ($departments as $name => $data) {
            $dataToInsert[] = [
                'name' => $name,
                'code' => $data[0],
                'access_code' => $data[1],
                'created_at' => $now,
                'updated_at' => $now,
            ];
        }

        // Вставляем пакетом для скорости
        DB::table('departments')->insert($dataToInsert);
    }
}
